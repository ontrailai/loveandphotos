import{c as x,u as U,a as T,n as G,r,z as n,s as g,j as e,C as b,k as c,g as p,B as y,A as H,U as V,b as I,o as Q}from"./index-Ci--PV5N.js";import{A as W}from"./arrow-left-wDL01bUV.js";const Y=x("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]),K=x("Glasses",[["circle",{cx:"6",cy:"15",r:"4",key:"vux9w4"}],["circle",{cx:"18",cy:"15",r:"4",key:"18o8ve"}],["path",{d:"M14 15a2 2 0 0 0-2-2 2 2 0 0 0-2 2",key:"1ag4bs"}],["path",{d:"M2.5 13 5 7c.7-1.3 1.4-2 3-2",key:"1hm1gs"}],["path",{d:"M21.5 13 19 7c-.7-1.3-1.5-2-3-2",key:"1r31ai"}]]),Z=x("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),$=x("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),J=x("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),se=()=>{var v,k;const{user:w}=U(),d=T(),{bookingId:m}=G(),[i,f]=r.useState(1),[h,S]=r.useState(null),[M,C]=r.useState(!0),[z,j]=r.useState(!1),[t,o]=r.useState({style:"",mood:"",shots:[],musicMood:"",specialMoments:[],notes:""}),u=5,q=[{id:"candid",title:"Candid & Natural",description:"Unposed moments, genuine emotions",icon:e.jsx($,{className:"w-8 h-8"}),image:"https://images.unsplash.com/photo-1606800052052-a08af7148866?w=400"},{id:"posed",title:"Classic & Posed",description:"Traditional portraits, structured shots",icon:e.jsx(V,{className:"w-8 h-8"}),image:"https://images.unsplash.com/photo-1595407753234-0ebe155ccdbd?w=400"},{id:"artistic",title:"Artistic & Creative",description:"Unique angles, creative compositions",icon:e.jsx(K,{className:"w-8 h-8"}),image:"https://images.unsplash.com/photo-1519225421980-715cb0215aed?w=400"},{id:"documentary",title:"Documentary Style",description:"Story-driven, journalistic approach",icon:e.jsx(Y,{className:"w-8 h-8"}),image:"https://images.unsplash.com/photo-1511285560929-80b456fea0bc?w=400"}],D=[{id:"bright",title:"Bright & Airy",description:"Light, soft, ethereal",icon:e.jsx(J,{className:"w-8 h-8"}),gradient:"from-yellow-100 to-pink-100"},{id:"moody",title:"Moody & Dramatic",description:"Deep shadows, rich colors",icon:e.jsx(Z,{className:"w-8 h-8"}),gradient:"from-purple-200 to-indigo-200"},{id:"vintage",title:"Vintage & Timeless",description:"Classic film look, muted tones",icon:e.jsx(I,{className:"w-8 h-8"}),gradient:"from-amber-100 to-orange-100"},{id:"vibrant",title:"Vibrant & Colorful",description:"Bold colors, high contrast",icon:e.jsx(Q,{className:"w-8 h-8"}),gradient:"from-pink-100 to-blue-100"}],F=[{id:"first-look",label:"First Look",icon:"👀"},{id:"ceremony-wide",label:"Ceremony Wide Shot",icon:"⛪"},{id:"ring-exchange",label:"Ring Exchange",icon:"💍"},{id:"first-kiss",label:"First Kiss",icon:"💋"},{id:"couple-portraits",label:"Couple Portraits",icon:"💑"},{id:"family-formals",label:"Family Formals",icon:"👨‍👩‍👧‍👦"},{id:"bridal-party",label:"Bridal Party",icon:"👯"},{id:"details",label:"Detail Shots",icon:"📸"},{id:"getting-ready",label:"Getting Ready",icon:"💄"},{id:"reception-entrance",label:"Reception Entrance",icon:"🎉"},{id:"first-dance",label:"First Dance",icon:"💃"},{id:"speeches",label:"Speeches/Toasts",icon:"🥂"},{id:"cake-cutting",label:"Cake Cutting",icon:"🎂"},{id:"dancing",label:"Dance Floor",icon:"🕺"},{id:"sunset-shots",label:"Golden Hour/Sunset",icon:"🌅"},{id:"night-shots",label:"Night Portraits",icon:"🌙"}],A=[{id:"cinematic",title:"Cinematic & Epic",description:"Orchestral, dramatic, movie-like",icon:"🎬"},{id:"romantic",title:"Romantic & Soft",description:"Love songs, acoustic, emotional",icon:"💕"},{id:"upbeat",title:"Upbeat & Fun",description:"Happy, energetic, celebration",icon:"🎉"},{id:"modern",title:"Modern & Trendy",description:"Contemporary hits, current vibes",icon:"🎵"}],E=[{id:"surprise",label:"Surprise/Special Performance",icon:"🎤"},{id:"cultural",label:"Cultural Traditions",icon:"🏮"},{id:"pets",label:"Pets Involved",icon:"🐕"},{id:"fireworks",label:"Fireworks/Sparklers",icon:"🎆"},{id:"helicopter",label:"Unique Exit (Helicopter, etc.)",icon:"🚁"},{id:"elderly",label:"Special Moments with Elderly",icon:"👵"}];r.useEffect(()=>{B()},[m]);const B=async()=>{var s;if(!m){n.error("No booking ID provided"),d("/dashboard");return}try{const{data:a,error:l}=await g.from("bookings").select(`
          *,
          photographers (
            users!inner (
              full_name
            )
          ),
          packages (
            title
          )
        `).eq("id",m).eq("customer_id",w.id).single();if(l)throw l;if(!a){n.error("Booking not found"),d("/dashboard");return}S(a),(s=a.personalization_data)!=null&&s.quizCompleted&&(n.info("You have already completed the style quiz"),d("/dashboard"))}catch(a){console.error("Error loading booking:",a),n.error("Failed to load booking details"),d("/dashboard")}finally{C(!1)}},P=()=>{i<u&&f(i+1)},O=()=>{i>1&&f(i-1)},_=s=>{o(a=>({...a,shots:a.shots.includes(s)?a.shots.filter(l=>l!==s):[...a.shots,s]}))},L=s=>{o(a=>({...a,specialMoments:a.specialMoments.includes(s)?a.specialMoments.filter(l=>l!==s):[...a.specialMoments,s]}))},N=()=>{switch(i){case 1:return t.style!=="";case 2:return t.mood!=="";case 3:return t.shots.length>0;case 4:return t.musicMood!=="";case 5:return!0;default:return!1}},R=async()=>{j(!0);try{const{error:s}=await g.from("bookings").update({personalization_data:{...t,quizCompleted:!0,completedAt:new Date().toISOString()},updated_at:new Date().toISOString()}).eq("id",m);if(s)throw s;n.success("Your style preferences have been saved!"),h.payment_status==="paid"&&await g.functions.invoke("notify-photographer-quiz",{body:{bookingId:m,photographerId:h.photographer_id}}),d("/dashboard")}catch(s){console.error("Error saving quiz data:",s),n.error("Failed to save preferences")}finally{j(!1)}};return M?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blush-50 via-white to-sage-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blush-500"})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blush-50 via-white to-sage-50",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-gray-100",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-display font-bold text-dusty-900",children:"Personalize Your Photography Experience"}),e.jsxs("p",{className:"text-dusty-600 mt-2",children:["Help ",(k=(v=h==null?void 0:h.photographers)==null?void 0:v.users)==null?void 0:k.full_name," capture your vision perfectly"]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm text-dusty-600",children:["Step ",i," of ",u]}),e.jsxs("span",{className:"text-sm text-dusty-600",children:[Math.round(i/u*100),"% Complete"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blush-500 to-sage-500 h-2 rounded-full transition-all duration-500",style:{width:`${i/u*100}%`}})})]})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i===1&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("h2",{className:"text-2xl font-semibold text-dusty-900 mb-6 text-center",children:"What's your preferred photography style?"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:q.map(s=>e.jsxs(b,{className:c("cursor-pointer transition-all overflow-hidden",t.style===s.id?"ring-2 ring-blush-500 shadow-lg transform scale-105":"hover:shadow-md"),onClick:()=>o({...t,style:s.id}),padding:!1,children:[e.jsxs("div",{className:"relative h-48",children:[e.jsx("img",{src:s.image,alt:s.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),e.jsx("div",{className:"absolute bottom-4 left-4 text-white",children:s.icon}),t.style===s.id&&e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx(p,{className:"w-8 h-8 text-white"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-dusty-900 mb-1",children:s.title}),e.jsx("p",{className:"text-sm text-dusty-600",children:s.description})]})]},s.id))})]}),i===2&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("h2",{className:"text-2xl font-semibold text-dusty-900 mb-6 text-center",children:"What color mood do you envision?"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:D.map(s=>e.jsxs(b,{className:c("cursor-pointer transition-all",t.mood===s.id?"ring-2 ring-blush-500 shadow-lg transform scale-105":"hover:shadow-md"),onClick:()=>o({...t,mood:s.id}),children:[e.jsxs("div",{className:c("h-24 rounded-lg mb-4 flex items-center justify-center bg-gradient-to-br",s.gradient),children:[e.jsx("div",{className:"text-white",children:s.icon}),t.mood===s.id&&e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx(p,{className:"w-6 h-6 text-blush-500"})})]}),e.jsx("h3",{className:"font-semibold text-dusty-900 mb-1",children:s.title}),e.jsx("p",{className:"text-sm text-dusty-600",children:s.description})]},s.id))})]}),i===3&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("h2",{className:"text-2xl font-semibold text-dusty-900 mb-2 text-center",children:"Select your must-have shots"}),e.jsx("p",{className:"text-dusty-600 text-center mb-6",children:"Choose all the moments you definitely want captured"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:F.map(s=>e.jsxs("button",{onClick:()=>_(s.id),className:c("p-4 rounded-lg border-2 transition-all text-center",t.shots.includes(s.id)?"border-blush-500 bg-blush-50":"border-gray-200 hover:border-gray-300"),children:[e.jsx("div",{className:"text-2xl mb-1",children:s.icon}),e.jsx("p",{className:"text-sm text-dusty-700",children:s.label}),t.shots.includes(s.id)&&e.jsx(p,{className:"w-4 h-4 text-blush-500 mx-auto mt-2"})]},s.id))})]}),i===4&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("h2",{className:"text-2xl font-semibold text-dusty-900 mb-6 text-center",children:"Video music preference"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:A.map(s=>e.jsx(b,{className:c("cursor-pointer transition-all",t.musicMood===s.id?"ring-2 ring-blush-500 shadow-lg":"hover:shadow-md"),onClick:()=>o({...t,musicMood:s.id}),children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"text-3xl",children:s.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-dusty-900",children:s.title}),e.jsx("p",{className:"text-sm text-dusty-600",children:s.description})]}),t.musicMood===s.id&&e.jsx(p,{className:"w-6 h-6 text-blush-500"})]})},s.id))})]}),i===5&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("h2",{className:"text-2xl font-semibold text-dusty-900 mb-6 text-center",children:"Any special moments or notes?"}),e.jsx(b,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-dusty-700 mb-3 block",children:"Special moments to capture (optional)"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:E.map(s=>e.jsxs("button",{onClick:()=>L(s.id),className:c("p-3 rounded-lg border text-sm transition-all",t.specialMoments.includes(s.id)?"border-blush-500 bg-blush-50":"border-gray-200 hover:border-gray-300"),children:[e.jsx("span",{className:"mr-2",children:s.icon}),s.label]},s.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-dusty-700 mb-2 block",children:"Additional notes for your photographer (optional)"}),e.jsx("textarea",{value:t.notes,onChange:s=>o({...t,notes:s.target.value}),placeholder:"Any specific requests, family dynamics to be aware of, or other important details...",className:"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blush-500 focus:border-transparent",rows:4})]})]})})]}),e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsxs(y,{variant:"outline",onClick:O,disabled:i===1,children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"Back"]}),i===u?e.jsxs(y,{onClick:R,loading:z,disabled:!N(),children:["Complete Quiz",e.jsx(p,{className:"w-4 h-4 ml-2"})]}):e.jsxs(y,{onClick:P,disabled:!N(),children:["Next",e.jsx(H,{className:"w-4 h-4 ml-2"})]})]})]})]})};export{se as default};
