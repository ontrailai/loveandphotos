import{c as A,a as se,h as ae,r as m,s as G,j as e,M as te,d as le,B as C,i as ie,k as P,R,e as E,C as z,b as O,g as W,V as ce,U as re,f as ne}from"./index-CaYf6dm0.js";import{A as D}from"./Avatar-xf-KI8su.js";const oe=A("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),me=A("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),de=A("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),H=["https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=400&fit=crop&crop=face","https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400&h=400&fit=crop&crop=face","https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=400&h=400&fit=crop&crop=face","https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=400&h=400&fit=crop&crop=face","https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400&h=400&fit=crop&crop=face","https://images.unsplash.com/photo-1517841905240-472988babdf9?w=400&h=400&fit=crop&crop=face","https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=400&h=400&fit=crop&crop=face","https://images.unsplash.com/photo-1539571696357-5a69c17a67c6?w=400&h=400&fit=crop&crop=face","https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=400&h=400&fit=crop&crop=face","https://images.unsplash.com/photo-1519345182560-3f2917c472ef?w=400&h=400&fit=crop&crop=face","https://images.unsplash.com/photo-1463453091185-61582044d556?w=400&h=400&fit=crop&crop=face","https://images.unsplash.com/photo-1480429370139-e0132c086e2a?w=400&h=400&fit=crop&crop=face","https://images.unsplash.com/photo-1488426862026-3ee34a7d66df?w=400&h=400&fit=crop&crop=face","https://images.unsplash.com/photo-1464863979621-258859e62245?w=400&h=400&fit=crop&crop=face","https://images.unsplash.com/photo-1507081323647-4d250478b919?w=400&h=400&fit=crop&crop=face","https://images.unsplash.com/photo-1560250097-0b93528c311a?w=400&h=400&fit=crop&crop=face","https://images.unsplash.com/photo-1519085360753-af0119f7cbe7?w=400&h=400&fit=crop&crop=face","https://images.unsplash.com/photo-1507591064344-4c6ce005b128?w=400&h=400&fit=crop&crop=face"],f=["https://images.unsplash.com/photo-1511285560929-80b456fea0bc?w=600","https://images.unsplash.com/photo-1519741497674-611481863552?w=600","https://images.unsplash.com/photo-1606216794074-735e91aa2c92?w=600","https://images.unsplash.com/photo-1537633552985-df8429e8048b?w=600","https://images.unsplash.com/photo-1465495976277-4387d4b0b4c6?w=600","https://images.unsplash.com/photo-1591604466107-ec97de577aff?w=600","https://images.unsplash.com/photo-1583939003579-730e3918a45a?w=600","https://images.unsplash.com/photo-1525673812761-4e0d45adc0cc?w=600","https://images.unsplash.com/photo-1460978812857-470ed1c77af0?w=600","https://images.unsplash.com/photo-1492691527719-9d1e07e534b4?w=600","https://images.unsplash.com/photo-1520854221256-17451cc331bf?w=600","https://images.unsplash.com/photo-1529636798458-92182e662485?w=600","https://images.unsplash.com/photo-1545232979-8bf68ee9b1af?w=600","https://images.unsplash.com/photo-1513279922550-250c2129b13a?w=600","https://images.unsplash.com/photo-1552750085-1cbc45a53c52?w=600","https://images.unsplash.com/photo-1469371670807-013ccf25f16a?w=600"],xe=()=>{const $=se(),[J,he]=ae(),[u,x]=m.useState([]),[h,S]=m.useState([]),[w,M]=m.useState(50),[q,L]=m.useState(!0),[t,_]=m.useState({zip:J.get("zip")||"",date:"",priceRange:"all",rating:0,tier:"all",specialties:[],languages:[]}),[B,K]=m.useState(!1),[k,I]=m.useState("grid"),Z=["Wedding","Portrait","Event","Corporate","Family","Newborn","Fashion","Real Estate"],Q=["English","Spanish","French","Chinese","Korean","Japanese","Hindi","Arabic"],X=[{value:"all",label:"All Prices"},{value:"0-150",label:"Under $150/hr"},{value:"150-300",label:"$150-$300/hr"},{value:"300-500",label:"$300-$500/hr"},{value:"500+",label:"$500+/hr"}];m.useEffect(()=>{U()},[t]),m.useEffect(()=>{h.length>0&&x(h.slice(0,w))},[w,h]);const U=async()=>{try{L(!0),console.log("Loading photographers...");let{data:s,error:i}=await G.from("photographer_preview_profiles").select("*").eq("is_available",!0).limit(500);if(console.log("Preview profiles loaded:",{previewProfiles:s,previewError:i}),!i&&s){console.log("Processing",s.length,"profiles");let r=s.map((a,c)=>{const n=H[c%H.length];return{id:a.id,user_id:a.user_id||a.id,bio:a.bio,specialties:a.specialties||[],languages:a.languages||["English"],years_experience:a.years_experience,hourly_rate:a.hourly_rate,location_city:a.location_city,location_state:a.location_state,is_available:a.is_available,is_public:!0,average_rating:a.average_rating||4.5,total_reviews:a.total_reviews||0,total_bookings:a.total_bookings||0,users:{full_name:a.display_name,avatar_url:a.image_url&&a.image_url.startsWith("http")?a.image_url:n},pay_tiers:{name:a.is_verified?"Professional":"Standard",hourly_rate:a.hourly_rate,badge_color:a.is_verified?"gold":"silver"},portfolio_items:[{image_url:f[c%f.length]},{image_url:f[(c+5)%f.length]},{image_url:f[(c+10)%f.length]}]}});if(t.rating>0&&(r=r.filter(a=>a.average_rating>=t.rating)),t.priceRange!=="all"){const[a,c]=t.priceRange.split("-").map(n=>n==="500+"?9999:parseInt(n));r=r.filter(n=>{const o=n.hourly_rate;return c===9999?o>=500:o>=a&&o<=(c||9999)})}if(t.specialties.length>0&&(r=r.filter(a=>t.specialties.some(c=>a.specialties.some(n=>n.toLowerCase().includes(c.toLowerCase()))))),t.languages.length>0&&(r=r.filter(a=>t.languages.some(c=>a.languages.includes(c)))),t.zip){const a=t.zip.toLowerCase();r=r.filter(c=>{var n,o;return((n=c.location_city)==null?void 0:n.toLowerCase().includes(a))||((o=c.location_state)==null?void 0:o.toLowerCase().includes(a))})}console.log("Setting photographers:",r.length,"photographers"),S(r),x(r.slice(0,w)),L(!1);return}let l=G.from("photographers").select(`
          *,
          users!inner(full_name, avatar_url),
          pay_tiers(name, hourly_rate, badge_color),
          portfolio_items(image_url)
        `).eq("is_public",!0).limit(20);t.rating>0&&(l=l.gte("average_rating",t.rating)),t.tier!=="all"&&(l=l.eq("pay_tiers.name",t.tier)),t.specialties.length>0&&(l=l.contains("specialties",t.specialties)),t.languages.length>0&&(l=l.contains("languages",t.languages)),l=l.order("average_rating",{ascending:!1});const{data:d,error:p}=await l;!p&&d?x(d):(console.log("No photographers found in fallback query"),x([]),S([]))}catch(s){console.error("Error loading photographers:",s),x([]),S([])}finally{L(!1)}},b=(s,i)=>{_(l=>({...l,[s]:i}))},Y=s=>{_(i=>({...i,specialties:i.specialties.includes(s)?i.specialties.filter(l=>l!==s):[...i.specialties,s]}))},ee=s=>{_(i=>({...i,languages:i.languages.includes(s)?i.languages.filter(l=>l!==s):[...i.languages,s]}))},V=()=>{_({zip:"",date:"",priceRange:"all",rating:0,tier:"all",specialties:[],languages:[]}),M(50)},F=t.specialties.length+t.languages.length+(t.rating>0?1:0)+(t.tier!=="all"?1:0)+(t.priceRange!=="all"?1:0);return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsx("div",{className:"flex-1 max-w-2xl",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(te,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-dusty-400"}),e.jsx("input",{type:"text",placeholder:"ZIP code or city",value:t.zip,onChange:s=>b("zip",s.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blush-500"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(le,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-dusty-400"}),e.jsx("input",{type:"date",value:t.date,onChange:s=>b("date",s.target.value),className:"pl-10 pr-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blush-500"})]}),e.jsx(C,{variant:"outline",onClick:()=>U(),children:e.jsx(ie,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(C,{variant:"outline",onClick:()=>K(!B),className:"relative",children:[e.jsx(oe,{className:"w-5 h-5 mr-2"}),"Filters",F>0&&e.jsx("span",{className:"absolute -top-2 -right-2 w-5 h-5 bg-blush-500 text-white text-xs rounded-full flex items-center justify-center",children:F})]}),e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>I("grid"),className:P("p-2 rounded transition",k==="grid"?"bg-white shadow-sm":"hover:bg-gray-50"),children:e.jsx(me,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>I("list"),className:P("p-2 rounded transition",k==="list"?"bg-white shadow-sm":"hover:bg-gray-50"),children:e.jsx(de,{className:"w-4 h-4"})})]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"flex gap-8",children:[e.jsx("div",{className:P("lg:block lg:w-64",B?"block":"hidden"),children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 sticky top-24",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"font-semibold text-dusty-900",children:"Filters"}),F>0&&e.jsx("button",{onClick:V,className:"text-sm text-blush-600 hover:text-blush-700",children:"Clear all"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-sm font-medium text-dusty-700 mb-3 block",children:"Price Range"}),e.jsx("select",{value:t.priceRange,onChange:s=>b("priceRange",s.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blush-500",children:X.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-sm font-medium text-dusty-700 mb-3 block",children:"Minimum Rating"}),e.jsx("div",{className:"space-y-2",children:[4,3,2,1].map(s=>e.jsxs("label",{className:"flex items-center cursor-pointer hover:bg-gray-50 p-2 -mx-2 rounded",children:[e.jsx("input",{type:"radio",name:"rating",value:s,checked:t.rating===s,onChange:()=>b("rating",s),className:"mr-3"}),e.jsx(R,{rating:s,size:"sm"}),e.jsx("span",{className:"ml-2 text-sm text-dusty-600",children:"& up"})]},s))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-sm font-medium text-dusty-700 mb-3 block",children:"Photographer Tier"}),e.jsx("div",{className:"space-y-2",children:["all","bronze","silver","gold","platinum"].map(s=>e.jsxs("label",{className:"flex items-center cursor-pointer hover:bg-gray-50 p-2 -mx-2 rounded",children:[e.jsx("input",{type:"radio",name:"tier",value:s,checked:t.tier===s,onChange:()=>b("tier",s),className:"mr-3"}),s==="all"?e.jsx("span",{className:"text-sm text-dusty-700",children:"All Tiers"}):e.jsx(E,{variant:s,size:"sm",children:s.charAt(0).toUpperCase()+s.slice(1)})]},s))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-sm font-medium text-dusty-700 mb-3 block",children:"Specialties"}),e.jsx("div",{className:"space-y-2",children:Z.map(s=>e.jsxs("label",{className:"flex items-center cursor-pointer hover:bg-gray-50 p-2 -mx-2 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.specialties.includes(s),onChange:()=>Y(s),className:"mr-3"}),e.jsx("span",{className:"text-sm text-dusty-700",children:s})]},s))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-sm font-medium text-dusty-700 mb-3 block",children:"Languages"}),e.jsx("div",{className:"space-y-2",children:Q.map(s=>e.jsxs("label",{className:"flex items-center cursor-pointer hover:bg-gray-50 p-2 -mx-2 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.languages.includes(s),onChange:()=>ee(s),className:"mr-3"}),e.jsx("span",{className:"text-sm text-dusty-700",children:s})]},s))})]})]})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("h2",{className:"text-2xl font-display font-semibold text-dusty-900",children:q?"Loading...":`${h.length} Photographers Available`})}),q?e.jsx("div",{className:P(k==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4"),children:[...Array(6)].map((s,i)=>e.jsxs(z,{className:"animate-pulse",children:[e.jsx("div",{className:"h-48 bg-gray-200 rounded-lg mb-4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]},i))}):u.length===0?e.jsxs(z,{className:"text-center py-12",children:[e.jsx(O,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-dusty-900 mb-2",children:"No photographers found"}),e.jsx("p",{className:"text-dusty-600 mb-4",children:"Try adjusting your filters or search criteria"}),e.jsx(C,{onClick:V,variant:"outline",children:"Clear Filters"})]}):k==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(s=>{var i,l,d,p,g,r,a,c,n,o,j,y,v,N;return e.jsxs(z,{hover:!0,className:"cursor-pointer overflow-hidden group",onClick:()=>$(`/photographer/${s.id}`),children:[e.jsxs("div",{className:"aspect-w-16 aspect-h-12 -m-6 mb-4",children:[e.jsx("img",{src:((l=(i=s.portfolio_items)==null?void 0:i[0])==null?void 0:l.image_url)||"https://images.unsplash.com/photo-1492691527719-9d1e07e534b4?w=600",alt:(d=s.users)==null?void 0:d.full_name,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs("div",{className:"px-6 pb-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(D,{src:(p=s.users)==null?void 0:p.avatar_url,name:(g=s.users)==null?void 0:g.full_name,size:"sm"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-dusty-900",children:((a=(r=s.users)==null?void 0:r.full_name)==null?void 0:a.split(" ")[0])||"Photographer"}),e.jsx("p",{className:"text-sm text-dusty-600",children:((c=s.specialties)==null?void 0:c[0])||"All Events"})]})]}),e.jsx(E,{variant:((o=(n=s.pay_tiers)==null?void 0:n.name)==null?void 0:o.toLowerCase())||"default",size:"sm",children:((j=s.pay_tiers)==null?void 0:j.name)||"Bronze"})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(R,{rating:s.average_rating||0,size:"sm",showNumber:!0}),e.jsxs("span",{className:"text-xs text-dusty-600 whitespace-nowrap",children:["(",s.total_reviews||0,")"]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-lg font-semibold text-dusty-900",children:["$",((y=s.pay_tiers)==null?void 0:y.hourly_rate)||150,"/hr"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[s.is_verified&&e.jsx(W,{className:"w-5 h-5 text-green-500",title:"Verified"}),((v=s.equipment_list)==null?void 0:v.includes("video"))&&e.jsx(ce,{className:"w-5 h-5 text-dusty-400",title:"Video available"})]})]}),((N=s.languages)==null?void 0:N.length)>0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-1",children:s.languages.slice(0,3).map(T=>e.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 text-dusty-600 rounded-full",children:T},T))})]})]},s.id)})}):e.jsx("div",{className:"space-y-4",children:u.map(s=>{var i,l,d,p,g,r,a,c,n,o,j,y,v,N;return e.jsx(z,{hover:!0,className:"cursor-pointer",onClick:()=>$(`/photographer/${s.id}`),padding:!1,children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-48 h-36 flex-shrink-0",children:e.jsx("img",{src:((l=(i=s.portfolio_items)==null?void 0:i[0])==null?void 0:l.image_url)||"https://images.unsplash.com/photo-1492691527719-9d1e07e534b4?w=400",alt:(d=s.users)==null?void 0:d.full_name,className:"w-full h-full object-cover rounded-l-xl"})}),e.jsxs("div",{className:"flex-1 p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(D,{src:(p=s.users)==null?void 0:p.avatar_url,name:(g=s.users)==null?void 0:g.full_name,size:"md"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-dusty-900",children:((a=(r=s.users)==null?void 0:r.full_name)==null?void 0:a.split(" ")[0])||"Photographer"}),e.jsx(E,{variant:((n=(c=s.pay_tiers)==null?void 0:c.name)==null?void 0:n.toLowerCase())||"default",size:"sm",children:((o=s.pay_tiers)==null?void 0:o.name)||"Bronze"}),s.is_verified&&e.jsx(W,{className:"w-5 h-5 text-green-500"})]}),e.jsxs("p",{className:"text-dusty-600",children:[((j=s.bio)==null?void 0:j.substring(0,100))||"Professional photographer","..."]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-xl font-bold text-dusty-900",children:["$",((y=s.pay_tiers)==null?void 0:y.hourly_rate)||150,"/hr"]}),e.jsx(R,{rating:s.average_rating||0,size:"sm",showNumber:!0})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-dusty-600",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(O,{className:"w-4 h-4 mr-1"}),((v=s.specialties)==null?void 0:v.join(", "))||"All Events"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(re,{className:"w-4 h-4 mr-1"}),((N=s.languages)==null?void 0:N.join(", "))||"English"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(ne,{className:"w-4 h-4 mr-1"}),s.response_time_hours||24,"hr response"]})]})]})]})},s.id)})}),u.length>0&&u.length<h.length&&e.jsx("div",{className:"mt-8 text-center",children:e.jsxs(C,{variant:"outline",size:"lg",onClick:()=>{const s=w+50;M(s),x(h.slice(0,s))},children:["Load More Photographers (",u.length," of ",h.length,")"]})})]})]})})]})};export{xe as default};
